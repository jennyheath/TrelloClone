TrelloClone.Views.BoardShow=Backbone.CompositeView.extend({template:JST["boards/board_show"],events:{sortupdate:"updateOrd"},initialize:function(){this.lists=this.model.lists(),this.listenTo(this.model,"sync",this.render),this.listenTo(this.lists,"add",this.addListShow),this.lists.each(this.addListShow.bind(this)),this.addListNewView()},addListShow:function(t){var i=new TrelloClone.Views.ListShow({model:t});this.addSubview(".lists-list",i)},addListNewView:function(){var t=new TrelloClone.Views.ListNew({collection:this.lists,model:this.model});this.addSubview(".new-list",t)},render:function(){var t=this.template({board:this.model});this.$el.html(t);var i=this.subviews();return i.sort(function(t,i){var s=t.getAttribute("ord"),e=i.getAttribute("ord");return s>e?1:e>s?-1:0}),this.attachSubviews(),$(".sortable").sortable(),this},updateOrd:function(t){var i=this,s=$(t.target);"lists-list row sortable ui-sortable"===s.attr("class")&&(s.children().each(function(t,s){var e=$(s).data("id"),o=i.lists.get(e);o.set("ord",t),o.save({success:function(){i.render()}})}),window.location.reload())}});