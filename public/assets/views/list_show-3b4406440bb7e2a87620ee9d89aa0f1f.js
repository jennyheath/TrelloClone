TrelloClone.Views.ListShow=Backbone.CompositeView.extend({className:"list group",template:JST["lists/list_show"],initialize:function(){this.list=this.model,this.cards=this.model.cards(),this.listenTo(this.model,"sync",this.render),this.listenTo(this.cards,"add",this.addCardShow),this.cards.each(this.addCardShow.bind(this)),this.addCardNewView(),this.$el.attr("data-id",this.list.id)},events:{"click .delete-list":"destroyList",sortupdate:"updateCardOrd"},addCardShow:function(t){var s=new TrelloClone.Views.CardShow({model:t,list:this.list});this.addSubview(".cards",s)},addCardNewView:function(){var t=new TrelloClone.Views.CardNewView({model:this.list});this.addSubview(".cards",t)},destroyList:function(t){t.preventDefault();var s=this;this.model.destroy({success:function(){s.remove()}})},render:function(){var t=this.template({list:this.model});return this.$el.html(t),this.attachSubviews(),this},updateCardOrd:function(t){var s=this,e=$(t.target);"cards sortable ui-sortable"===e.attr("class")&&e.children().each(function(t,e){if("card"==e.children[0].className){var i=$(e).data("id"),d=s.model.cards().get(i);d.set("ord",t),d.save({success:function(){s.render()}})}})}});